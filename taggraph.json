---
layout: null
---
/*{% capture tags %}
  {% for collection_item in site.paper_gods %}{% for t in collection_item.tags %}{{ t }}{% unless forloop.last %}^{% endunless %}{% endfor %}{% unless forloop.last %}^{% endunless %}{% endfor %}
{% endcapture %}
{% assign taglist = tags | strip | strip_newlines| split: "^" | uniq %}
{% capture linklist %}
  {% for collection_item in site.paper_gods %}
    {% for tag in taglist %}
      {% for t in collection_item.tags %}
        {% assign t = t | %}
        {% if t == tag %}
          {% capture link_temp %}
            {"source": {{ collection_item.title | strip_newlines | jsonify }}, "target": {{ t | jsonify }}, "value": 1}^
          {% endcapture %}
          {% if link_temp != "" %}
            {{ linklist | append: link_temp }}
          {% endif %}
          {% assign link_temp = "" %}
        {% endif %}
      {% endfor %}
    {% endfor %}
  {% endfor %}
{% endcapture %}
{% assign link_array = linklist | strip | split: "^" %}
{% capture my_json %}
  {
    "nodes": [
      {% for collection_item in site.paper_gods %}
        { "id": {{ collection_item.title | strip_newlines | jsonify }}, "link": {{ site.baseurl | append:collection_item.url | jsonify }}, "group": 1 },{% assign id_count = id_count | plus: 1%}
      {% endfor %}
      {% for tag in taglist %}
        { "id": {{ tag | jsonify }}, "group": 2 }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ],
    "links": [
      {% for link in link_array %}
        {{ link | strip | strip_newlines }}{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  }
{% endcapture %}
{{ my_json | strip }}*/
