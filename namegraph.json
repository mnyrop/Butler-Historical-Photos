---
layout: null
---
{% capture nms %}{% for item in site.photos %}{% if item.name %}{{ item.name | strip_html | strip | strip_newlines }}^{% endif %}{% endfor %}{% endcapture %}
{% assign namelist = nms | split: '^' | uniq %}
{% capture linklist %}
  {% for item in site.photos %}
    {% for name in namelist %}
      {% for n in item.name %}
        {% if n == name %}
          {% capture link_temp %}
            { "source": {{ item.title | strip_newlines | strip_html | strip | jsonify }}, "target": {{ n | jsonify }} }^
          {% endcapture %}
          {% if link_temp != "" %}
            {{ linklist | append: link_temp }}
          {% endif %}
          {% assign link_temp = "" %}
        {% endif %}
      {% endfor %}
    {% endfor %}
  {% endfor %}
{% endcapture %}
{% assign link_array = linklist | strip | split: "^" %}
{% capture my_json %}
{
  "nodes": [
    {% for item in site.photos %}
      { "id": {{ item.title | strip_newlines | jsonify }} },
    {% endfor %}
    {% for n in namelist %}
      { "id": {{ n | jsonify }} }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ],
  "links": [
    {% for link in link_array %}
      {{ link | strip | strip_newlines }}{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
{% endcapture %}
{{ my_json | strip }}
